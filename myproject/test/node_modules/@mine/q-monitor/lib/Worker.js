var axon = require('axon');
var sock = axon.socket('push');

function Worker(port) {
    this.port = port;
    sock.bind(this.port);
}

Worker.prototype.addCount =  function(metry) {
    var msg = {
        cmd: 'addMonitor',
        type: 'count',
        metry: metry
    };
    this.sendMsg(msg);
}

Worker.prototype.addTime =  function(metry, time) {
    var msg = {
        cmd: 'addMonitor',
        type: 'time',
        metry: metry,
        time: time
    };
    this.sendMsg(msg);
}

Worker.prototype.sendMsg = function(msg) {
    sock.send(msg);
}

module.exports = Worker;
